{
  "openapi": "3.0.0",
  "info": {
    "title": "API Smart_home",
    "description": "Документация API для системы Smart_home. Убедитесь что браузер не захешировал авторизационные токены",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://127.0.0.1:8000",
      "description": "Локальный сервер разработки"
    }
  ],
  "tags": [
    {
      "name": "Authentication and authorization",
      "description": "Операции аутентификации и авторизации"
    },
    {
      "name": "Vacancies",
      "description": "Управление вакансиями"
    }
  ],

"security": [
  { "bearerAuth": [] }
],
  "paths": {
    "/api/login": {
      "post": {
        "tags": ["Authentication and authorization"],
        "summary": "Аутентификация пользователя",
        "operationId": "login",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "admin@mail.ru"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "Q1qqqqqq"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успешная аутентификация",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "user_id": {
                          "type": "integer",
                          "example": 1
                        },
                        "name": {
                          "type": "string",
                          "example": "Admin"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "example": "admin@mail.ru"
                        },
                        "role": {
                          "type": "string",
                          "example": "admin"
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2025-03-21T12:56:08Z"
                        },
                        "updated_at": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2025-03-21T12:56:08Z"
                        }
                      }
                    },
                    "token": {
                      "type": "string",
                      "example": "1|h6CSdLddh96pgbRtIpuczmRieUeyf8hGE6xaaglE27e1e2a2"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Неверные учетные данные",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Неверные учетные данные"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/register": {
      "post": {
        "tags": ["Authentication and authorization"],
        "summary": "Регистрация пользователя",
        "operationId": "register",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "email", "password", "password_confirmation"],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Тестовый пользователь"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "Q1qqqqqq"
                  },
                  "password_confirmation": {
                    "type": "string",
                    "format": "password",
                    "example": "Q1qqqqqq"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Успешная регистрация",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "user_id": {
                          "type": "integer",
                          "example": 1
                        },
                        "name": {
                          "type": "string",
                          "example": "Тестовый пользователь"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "example": "user@example.com"
                        },
                        "role": {
                          "type": "string",
                          "example": "NULL"
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2025-05-06T14:39:55Z"
                        },
                        "updated_at": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2025-05-06T14:39:55Z"
                        }
                      }
                    },
                    "token": {
                      "type": "string",
                      "example": "1|h6CSdLddh96pgbRtIpuczmRieUeyf8hGE6xaaglE27e1e2a2"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Ошибки валидации",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "array",
                          "items": {
                            "type": "string",
                            "example": "Поле name обязательно для заполнения"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/logout": {
      "post": {
        "tags": ["Authentication and authorization"],
        "summary": "Выход из системы",
        "operationId": "logout",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Успешный выход",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Logged out successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Неавторизованный доступ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Unauthenticated"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/vacancies": {
      "get": {
        "tags": ["Vacancies"],
        "summary": "Получение списка вакансий",
        "operationId": "index",
        "security": [{"bearerAuth": []}],
        "parameters": [{
            "name": "page",
            "in": "query",
            "required": true,
            "schema": {
                "type": "string",
                "example": "9"
            }
        }],
        "responses": {
          "200": {
            "description": "Успешный ответ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "vacancies": {
                      "type": "object",
                      "properties": {
                        "current_page": {
                          "type": "integer",
                          "example": 1
                        },
                        "data": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "vacancy_id": {
                                "type": "integer",
                                "example": 14
                              },
                              "title": {
                                "type": "string",
                                "example": "Бариста"
                              },
                              "description": {
                                "type": "string",
                                "example": "Полное описание вакансии..."
                              },
                              "department": {
                                "type": "string",
                                "example": "Офис-менеджер"
                              },
                              "location": {
                                "type": "string",
                                "example": "В офисе"
                              },
                              "type": {
                                "type": "string",
                                "example": "Полный рабочий день"
                              },
                              "salary": {
                                "type": "integer",
                                "example": 42000
                              },
                              "published_at": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2020-10-10T00:00:00Z"
                              },
                              "contact_email": {
                                "type": "string",
                                "format": "email",
                                "example": "email@example.com"
                              },
                              "contact_phone": {
                                "type": "string",
                                "example": "+7 (123) 456-7890"
                              }
                            }
                          }
                        },
                        "first_page_url": {
                          "type": "string",
                          "example": "http://127.0.0.1:8000/api/vacancies?page=1"
                        },
                        "from": {
                          "type": "integer",
                          "example": 1
                        },
                        "last_page": {
                          "type": "integer",
                          "example": 9
                        },
                        "last_page_url": {
                          "type": "string",
                          "example": "http://127.0.0.1:8000/api/vacancies?page=9"
                        },
                        "links": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "url": {
                                "type": "string",
                                "nullable": true,
                                "example": null
                              },
                              "label": {
                                "type": "string",
                                "example": "&laquo; Previous"
                              },
                              "active": {
                                "type": "boolean",
                                "example": false
                              }
                            }
                          }
                        },
                        "next_page_url": {
                          "type": "string",
                          "nullable": true,
                          "example": "http://127.0.0.1:8000/api/vacancies?page=2"
                        },
                        "path": {
                          "type": "string",
                          "example": "http://127.0.0.1:8000/api/vacancies"
                        },
                        "per_page": {
                          "type": "integer",
                          "example": 12
                        },
                        "prev_page_url": {
                          "type": "string",
                          "nullable": true,
                          "example": null
                        },
                        "to": {
                          "type": "integer",
                          "example": 12
                        },
                        "total": {
                          "type": "integer",
                          "example": 101
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Неавторизованный доступ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Unauthenticated"
                    }
                  }
                }
              }
            }
          }
        }
      },
        "post": {
            "tags": ["Vacancies"],
            "summary": "Добавление вакансии в бд",
            "operationId": "store",
            "security": [{"bearerAuth": []}],
            "requestBody": {
                "required": true,
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "required": ["title", "description", "department", "location", "type", "salary", "contact_email", "contact_phone"],
                            "properties": {
                                "title": {
                                    "type": "string",
                                    "example": "Название"
                                },
                                "description": {
                                    "type": "string",
                                    "example": "Описание вакансии"
                                },
                                "department": {
                                    "type": "string",
                                    "example": "Должность"
                                },
                                "location": {
                                    "type": "string",
                                    "example": "Место работы"
                                },
                                "type": {
                                    "type": "string",
                                    "example": "Полный рабочий день"
                                },
                                "salary": {
                                    "type": "integer",
                                    "example": 50000
                                },
                                "contact_email": {
                                    "type": "string",
                                    "format": "email",
                                    "example": "pochta@mail.ru"
                                },
                                "contact_phone": {
                                    "type": "string",
                                    "exmple": "+7-777-777-7777"
                                }
                            }
                        }
                    }
                }
            },
            "responses": {
                "201": {
                    "description": "Успешное создание записи",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "success": {
                                        "example": true
                                    },
                                    "message": {
                                        "type": "string",
                                        "example": "Вакансия успешно создана"
                                    }
                                }
                            }
                        }
                    }
                },
                "401": {
                    "description": "Неавторизованный пользователь",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "Unauthenticated."
                                    }
                                }
                            }
                        }
                    }
                },
                "403": {
                    "description": "Недостаточно прав",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "User is not an admin"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }



    },
    "/api/vacancies/{id}": {
      "get": {
        "tags": ["Vacancies"],
        "summary": "Получение конкретной вакансии",
        "operationId": "show",
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Успешное получение конкретной вакансии",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "vacancy": {
                      "type": "object",
                      "properties": {
                        "vacancy_id": {
                          "type": "integer",
                          "example": 14
                        },
                        "title": {
                          "type": "string",
                          "example": "Бариста"
                        },
                        "description": {
                          "type": "string",
                          "example": "Полное описание вакансии..."
                        },
                        "department": {
                          "type": "string",
                          "example": "Офис-менеджер"
                        },
                        "location": {
                          "type": "string",
                          "example": "В офисе"
                        },
                        "type": {
                          "type": "string",
                          "example": "Полный рабочий день"
                        },
                        "salary": {
                          "type": "integer",
                          "example": 42000
                        },
                        "published_at": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2020-10-10T00:00:00Z"
                        },
                        "contact_email": {
                          "type": "string",
                          "format": "email",
                          "example": "email@example.com"
                        },
                        "contact_phone": {
                          "type": "string",
                          "example": "+7 (123) 456-7890"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
        "401": {
            "description": "Неавторизованный доступ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Unauthenticated"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Вакансия не найдена",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "No query results for model [App\\Models\\Vacancies] {id}"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Vacancies"],
        "summary": "Обновление вакансии",
        "operationId": "update",
        "security": [{"bearerAuth": []}],
        "parameters": [{
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
                "type": "integer"
            }
        }],
        "requestBody": {
            "required": true,
            "content": {
                "application/json": {
                    "schema": {
                        "type": "object",
                        "required": ["title", "description", "department", "location", "type", "salary", "contact_email", "contact_phone"],
                        "properties": {
                            "title": {
                                "type": "string",
                                "example": "Измененное название"
                            },
                            "description": {
                                "type": "string",
                                "example": "Изменённое описание вакансии"
                            },
                            "department": {
                                "type": "string",
                                "example": "Должность"
                            },
                            "location": {
                                "type": "string",
                                "example": "Место работы"
                            },
                            "type": {
                                "type": "string",
                                "example": "Полный рабочий день"
                            },
                            "salary": {
                                "type": "integer",
                                "example": 50000
                            },
                            "contact_email": {
                                "type": "string",
                                "format": "email",
                                "example": "pochta@mail.ru"
                            },
                            "contact_phone": {
                                "type": "string",
                                "exmple": "+7-777-777-7777"
                            }
                        }
                    }
                }
            }
        },
        "responses": {
            "200": {
                "description": "Успешное обновление записи",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "Вакансия успешно обновлена"
                                    }
                                }
                            }
                        }
                    }
                },
                "401": {
                    "description": "Неавторизованный пользователь",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "Unauthenticated."
                                    }
                                }
                            }
                        }
                    }
                },
                "403": {
                    "description": "Недостаточно прав",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "User is not an admin"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "delete": {
            "tags": ["Vacancies"],
            "summary": "Удаление конкретной вакансии",
            "operationId": "destroy",
            "security": [{"bearerAuth": []}],
            "parameters": [{
                "name": "id",
                "in": "path",
                "required": true,
                "schema": {
                "type": "integer"
                }
            }],
            "responses": {
                "200": {
                    "description": "Успешное удаление записи",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "Вакансия успешно удалена"
                                    }
                                }
                            }
                        }
                    }
                },
                "401": {
                    "description": "Неавторизованный пользователь",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "Unauthenticated."
                                    }
                                }
                            }
                        }
                    }
                },
                "403": {
                    "description": "Недостаточно прав",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "User is not an admin"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
"/api/cart": {
    "get": {
        "tags": ["Cart"],
        "summary": "Получение корзины товаров конкретного пользователя",
        "security": [{"bearerAuth": []}],
        "responses": {
            "200": {
                "description": "Успешный ответ",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean",
                                    "example": true
                                },
                                "data": {
                                    "type": "array",
                                    "items": {
                                        "type": "object",
                                        "properties": {
                                            "total_price": {
                                                "type": "integer",
                                                "example": 3070
                                            },
                                            "product_image": {
                                                "type": "string",
                                                "example": "img/products/6540911367.webp"
                                            },
                                            "title": {
                                                "type": "string",
                                                "example": "Полное название товара..."
                                            },
                                            "warranty": {
                                                "type": "string",
                                                "example": "1 год"
                                            },
                                            "brand": {
                                                "type": "string",
                                                "example": "OOO Компания"
                                            },
                                            "material": {
                                                "type": "string",
                                                "example": "Пластик"
                                            },
                                            "power_supply": {
                                                "type": "string",
                                                "example": "От батареек"
                                            },
                                            "quantity": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "cart_id": {
                                                "type": "integer",
                                                "example": 37
                                            },
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "401": {
                "description": "Неавторизованный доступ",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "example": "Unauthenticated"
                                }
                            }
                        }
                    }
                }
            },
        }
    }
},
"/api/cart/{cart_id}": {
    "delete": {
        "tags": ["Cart"],
        "summary": "Удаление товара из корзины",
        "security": [{"bearerAuth": []}],
        "parameters": [{
            "name": "cart_id",
            "in": "path",
            "required": true,
            "schema": {
                "type": "integer"
            }
        }],
        "responses": {
            "200": {
                "description": "Успешное удаление товара из корзины",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "example": "Запись в таблице Cart успешно удалена"
                                }
                            }
                        }
                    }
                }
          },
            "401": {
                "description": "Неавторизованный доступ",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "example": "Unauthenticated"
                                }
                            }
                        }
                    }
                }
          },
            "404": {
                "description": "Товар в корзине не найден",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "example": "Запись в таблице Cart не найдена"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
},
"/api/orders": {
    "post": {
        "tags": ["Cart"],
        "summary": "Оформление доставки",
        "security": [{"bearerAuth": []}],
        "requestBody": {
            "required": true,
            "content": {
                "application/json": {
                    "schema": {
                        "type": "object",
                        "required": ["user_id", "product_id", "quantity", "order_status", "shipping_address", "shipping_cost", "order_date", "delivery", "payment_method"],
                        "properties": {
                            "user_id": {
                                "type": "integer",
                                "example": 3
                            },
                            "product_id": {
                                "type": "integer",
                                "example": 7
                            },
                            "quantity": {
                                "type": "integer",
                                "example": 1
                            },
                            "order_status": {
                                "type": "string",
                                "example": "в обработке"
                            },
                            "shipping_address": {
                                "type": "string",
                                "example": "г.Город, дом 11"
                            },
                            "shipping_cost": {
                                "type": "integer",
                                "example": 150
                            },
                            "order_date": {
                                "type": "string",
                                "example": "2025-04-23"
                            },
                            "delivery": {
                                "type": "string",
                                "example": "2025-05-29"
                            },
                            "payment_method": {
                                "type": "string",
                                "example": "Kiwi"
                            }
                        }
                    }
                }
            }
        },
        "responses": {
            "201": {
                "description": "Успешное оформление доставки",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "success": {
                                        "example": true
                                    },
                                    "message": {
                                        "type": "string",
                                        "example": "Доставка успешно офрмлена!"
                                    }
                                }
                            }
                        }
                    }
                },
                "401": {
                    "description": "Неавторизованный пользователь",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "Unauthenticated."
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "/api/cart/add/{product_id}": {
        "post": {
            "tags": ["Cart"],
            "summary": "Добавление товара в корзину",
            "security": [{"bearerAuth": []}],
            "parameters": [{
                "name": "product_id",
                "in": "path",
                "required": true,
                "schema": {
                    "type": "integer"
                }
            }],
            "responses": {
                "200": {
                    "description": "Успешное добавление товара в корзину",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "success": {
                                        "example": true
                                    },
                                    "message": {
                                        "type": "string",
                                        "example": "Добавлено в корзину"
                                    }
                                }
                            }
                        }
                    }
                },
                "401": {
                    "description": "Неавторизованный пользователь",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "message": {
                                        "type": "string",
                                        "example": "Unauthenticated."
                                    }
                                }
                            }
                        }
                    }
                },
            }
        }
    }
},
"components": {
  "securitySchemes": {
    "bearerAuth": {
      "type": "http",
      "scheme": "bearer",
      "bearerFormat": "JWT"
    }
  }
}
}
